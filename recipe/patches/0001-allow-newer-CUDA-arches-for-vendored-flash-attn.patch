From 55ccf0127232a8b1ff9f3310799a150e30f33168 Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Wed, 3 Sep 2025 12:39:13 +1100
Subject: [PATCH] allow newer CUDA arches for vendored flash-attn

---
 setup.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/setup.py b/setup.py
index e9e6f72d..f8f0b2c8 100644
--- a/setup.py
+++ b/setup.py
@@ -300,7 +300,7 @@ def get_flash_attention3_nvcc_archs_flags(cuda_version: int):
         match = PARSE_CUDA_ARCH_RE.match(arch)
         assert match is not None, f"Invalid sm version: {arch}"
         num = 10 * int(match.group("major")) + int(match.group("minor"))
-        if num not in [80, 90]:  # only support Sm80/Sm90
+        if num not in [80, 89, 90, 100, 120]:
             continue
         suffix = match.group("suffix")
         nvcc_archs_flags.append(
