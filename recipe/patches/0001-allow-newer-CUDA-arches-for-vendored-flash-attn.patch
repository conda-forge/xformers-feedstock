From 6bbdb7bcc0021d3c4adfb0ad324edfc8ad27ae67 Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Wed, 3 Sep 2025 12:39:13 +1100
Subject: [PATCH 1/3] allow newer CUDA arches for vendored flash-attn

---
 setup.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/setup.py b/setup.py
index 072c98c6..40d1bd3b 100644
--- a/setup.py
+++ b/setup.py
@@ -152,7 +152,7 @@ def get_flash_attention3_nvcc_archs_flags(cuda_version: int):
         match = PARSE_CUDA_ARCH_RE.match(arch)
         assert match is not None, f"Invalid sm version: {arch}"
         num = 10 * int(match.group("major")) + int(match.group("minor"))
-        if num not in [80, 90]:  # only support Sm80/Sm90
+        if num not in [80, 89, 90, 100, 120]:
             continue
         suffix = match.group("suffix")
         nvcc_archs_flags.append(
